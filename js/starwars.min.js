function falcon(){$falcon=$('<img class="falcon" width='+falcon_width+">"),$falcon.appendTo($("body")),$falcon.attr("src","img/millenium_falcon.png"),$falcon.data("score",score.millenium_falcon),$falcon.data("destroyed",!1);var e=screen.height;$falcon.css({top:myRandom(0,e-450)}),falcon_tperiod=0,moveFalcon()}function moveFalcon(){!$falcon.data("destroyed")&&$falcon.position().left<$("body").width()?setTimeout(function(){$falcon.css({left:$falcon.position().left+3*SPEED+"px",top:$falcon.position().top+sinusoidal()+"px"}),moveFalcon()},10):$falcon.data("destroyed")||deleteFalcon()}function sinusoidal(){return falcon_tperiod<=2*Math.PI?falcon_tperiod+=.02:falcon_tperiod=0,2*Math.sin(falcon_tperiod)}function deleteFalcon(){$falcon.remove()}function destroyed(e){var a=e.hasClass("falcon");e.data("destroyed",!0),e.attr("src","img/explosion.png"),setTimeout(function(){a?e.remove():resetSpacecraft(e)},1e3)}function addScore(e){$score=$("#score span"),current=parseInt($score.html()),$score.html(current+e)}function createSpacecraft(){var e=$('<img class="spacecraft" height='+spacecraft_height+">"),a=spacecrafts[myRandom(0,spacecrafts.length-1)];e.attr("src","img/"+a+".png"),e.appendTo($("body")),e.data("score",score[a]),e.data("destroyed",!1);var t=screen.width;return e.css({left:myRandom(150,t-150)}),moveSpacecraft(e),e}function resetSpacecraft(e){var a=spacecrafts[myRandom(0,spacecrafts.length-1)];e.attr("src","img/"+a+".png"),e.data("score",score[a]),e.data("destroyed",!1);var t=screen.width,c=screen.height;e.css({left:myRandom(150,t-150),top:c}),moveSpacecraft(e)}function moveSpacecraft(e){!e.data("destroyed")&&e.position().top>-spacecraft_height?setTimeout(function(){e.css({top:parseInt(e.position().top-SPEED)+"px"}),moveSpacecraft(e)},30):e.data("destroyed")||(loseLife(),e=resetSpacecraft(e))}function loseLife(){$("#lives li:nth-child("+lives+")").addClass("grey"),lives--,0===lives&&game_over()}function game_over(){finished=!0,$("#game_over").addClass("table")}function reset(){$("#game_over").removeClass("table"),$("#score span").html(0),lives=3,finished=!1,$("#lives li").removeClass("grey"),SPEED=1,$.each(array_spacecraft,function(e,a){a=resetSpacecraft(a)})}function start(){$("#start_game").addClass("none"),falcon();for(var e=0;max_spacecrafts>e;e++)array_spacecraft.push(createSpacecraft())}function myRandom(e,a){return Math.floor(Math.random()*(a-e+1))+e}var lives=3,array_spacecraft=[],score={millenium_falcon:100,infilter:5,jedi:10,slave:15,xwing:20},spacecrafts=["infilter","jedi","slave","xwing"],falcon_width=150,spacecraft_height=150,$falcon=null,SPEED=1,falcon_tperiod=0,max_spacecrafts=7,finished=!1;$("#game_over a").on("click",function(e){e.preventDefault(),reset()}),$("#start_game a").on("click",function(e){e.preventDefault(),start()}),$(document).on("click",".falcon",function(){finished||(addScore($(this).data("score")),destroyed($(this)))}),$(document).on("click",".spacecraft",function(){finished||(addScore($(this).data("score")),destroyed($(this)))});